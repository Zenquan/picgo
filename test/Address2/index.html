<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <p>省市两级联动</p>
    <div>
        <select id="giftStyle"></select>
        <select id="giftSize"></select>
    </div>
    <style>
        select {
            height: 30px;
            border-radius: 4px;
            color: #333;
        }

    </style>
      
    <script>
        var sizes = [{
          size: '男款',
          sizeList: [{
            size: 'XL'
          }, {
            size: 'XXL'
          }]
        }, {
          size: '女款',
          sizeList: [{
            size: 'X'
          }, {
            size: 'M'
          }]
        }];
        function $ (id) {
          return document.getElementById(id)
        }

        function Specs (options) {
          this.giftStyleDom = $('giftStyle');
          this.giftSizeDom = $('giftSize');
          this.defaultStyle = options.defaultStyle;
          this.defaultSize = options.defaultSize;
          this.giftStyleValue = options.defaultStyle;
          this.giftSizeValue = options.defaultSize;
        }

        Specs.prototype = {
          initStyle () {
            var oFrag = document.createDocumentFragment();
            this.giftStyleDom.innerHTML = '';
            this.cal(oFrag, sizes, this.giftStyleDom);
            this.giftStyleDom.value = this.defaultStyle;
          },
          initSize () {
            var index = this.giftStyleDom.selectedIndex,
              oFrag = document.createDocumentFragment();
            this.giftSizeDom.innerHTML = '';
            this.sizeList = sizes[index]['sizeList'];
            this.cal(oFrag, this.sizeList, this.giftSizeDom);
            this.giftSizeDom.value = this.defaultSize;
          },
          init () {
            var _this = this;
            this.initStyle();
            this.initSize();
            this.giftStyleDom.onchange = function () {
              _this.changeStyle(_this);
              _this.giftStyleValue = _this.giftStyleDom.value;
            }
            this.giftSizeDom.onchange = function () {
              var index = this.selectedIndex;
              _this.changeSize(_this, index);
              _this.giftSizeValue = _this.giftSizeDom.value;
            }
          },
          cal(oFrag, arr, list) {
            arr.forEach(function (item, arr, index) {
              var option = document.createElement('option');
              option.innerHTML = item.size ? item.size : item;
              oFrag.appendChild(option);
            })
            list.appendChild(oFrag);
          },
          changeStyle (_this) {
            // 选中的索引
            var index = this.giftStyleDom.selectedIndex,
              oFrag = document.createDocumentFragment();
            _this.giftSizeDom.innerHTML = '';
            _this.sizeList = sizes[index]['sizeList'];
            _this.cal(oFrag, _this.sizeList, _this.giftSizeDom);
          },
          changeSize (_this, index) {
            // 选中的索引
            var index = index,
              oFrag = document.createDocumentFragment();
            _this.calCity(_this, index);
          },
          calCity(_this, index) {
            _this.sizeList = sizes[index]['sizeList'];
          }
        }

        var specs1 = new Specs({
          defaultStyle: '男款',
          defaultSize: 'XL'
        });
        specs1.init();
        console.log('>>>', specs1.giftStyleDom.value, specs1.giftSizeDom.value);
    </script>
</body>

</html>
